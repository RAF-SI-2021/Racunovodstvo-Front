<!--https://www.geeksforgeeks.org/angular-ng-bootstrap-collapse-component/-->

<div class="row text-center mb-5">
  <div class="col-sm-2">
  </div>
  <div class="col-sm-8">
    <form class="form-control" [formGroup]="obracun"> <!--(submit)=""-->
      <div class="row">
        <div class="col-sm-4">
          <label class="labelClass">Naziv obracuna:</label>
          <input class="form-control" placeholder="{{obracun.controls['prezime'].value | date :'MM/YY'}}" type="text" [formControlName]="'ime'">
        </div>

        <div class="col-sm-4">
          <label class="labelClass">Datum:</label>
          <input class="form-control" type="date" [formControlName]="'prezime'">
        </div>

        <div class="col-sm-4">
          <label class="labelClass">Vreme:</label>
          <input class="form-control" placeholder="Neto plata" type="time" [formControlName]="'netoPlata'">
        </div>
      </div>

      <div class="row text-center  mt-2">
        <div class="col-sm-5"></div>
        <div class="col-sm-2">
          <button class="btn btn-sm btn-primary" type="submit">Dodaj obracun</button>
        </div>
        <div class="col-sm-5"></div>
      </div>
    </form>
  </div>
  <div class="col-sm-2">

  </div>
</div>

<div>
  <div class="view" *ngFor="let obracun of obracuni; index as i">
    <div class="div_hover mx-5" style="border: 1px solid; border-radius: 5px; text-align: center;">

      <div style="height: 3rem; font-size: large; " (click)="collapse.toggle()"
           [attr.aria-expanded]="!flagovi[i]"
           aria-controls="collapseExample">
        {{obracun | date : 'MM/YY'}}
      </div>

      <div #collapse="ngbCollapse"
           [(ngbCollapse)]="flagovi[i]">
        <div class="card">
          <div class="card-body">

            <!--            Angular10 ng bootstrap-->
            <!--            {{datum | date : 'MM/YY'}}-->

            <div class="mt-4">
              <table class="table table-striped table-responsive-sm">
                <thead>
                <tr>
                  <th>Å ifra zaposlenog</th>
                  <th>Ime i prezime</th>
                  <th>Neto plata</th>
                  <th>Porez</th>
                  <th>Doprinos 1</th>
                  <th>Bruto plata</th>
                  <th>Doprinos 2</th>
                  <th>Ucinak %</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let plata of plate; index as i">
                  <td>{{ plata.zaposleni.zaposleniId }}</td>
                  <td>{{ plata.zaposleni.ime }} {{plata.zaposleni.prezime}}</td>
                  <td>{{ plata.netoPlata}}</td>
                  <td>{{ plata.porez}}</td>
                  <td>{{ plata.doprinos1}}</td>
                  <td>{{ plata.brutoPlata}}</td>
                  <td>{{ plata.doprinos2}}</td>
                  <td><input size="4" maxlength="3" min="1" max="100" type="text" [(ngModel)]="plata.ucinak"></td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
          <button class="btn btn-danger mx-5">Izvrsi transakciju</button>
        </div>
      </div>
    </div>
  </div>


</div>
